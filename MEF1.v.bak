module MEF1(output [1:0] cout, input c, input ve, input rega, input reset, input clock);


	clock_divisor(newclk0, clock, 1);
	
	clock_divisor(newclk1, newclk0, 1);
	
	clock_divisor(newclk2, newclk1, 1);
	clock_divisor(newclk3, newclk2, 1);
	clock_divisor(newclk4, newclk3, 1);
	
	parameter VZ = 2'b00;
	parameter EN = 2'b01;
	parameter ERRO = 2'b10;
	parameter REGA = 2'b11;
	
	
	reg [1:0] state, nextstate;
	
	not (resetN,reset);
	
	always @(posedge newclk4, posedge resetN)
	if (resetN) state <= VZ;
	else state <= nextstate;
	
	
	
	always @(*)
	case (state)
		VZ: if (!c & ve & !rega) nextstate = EN;
		else if (rega) nextstate = ERRO;
		else nextstate = VZ;
		
		EN: if (c & !ve) nextstate = REGA;
		else if (ve & rega) nextstate = ERRO;
		else nextstate = EN;
		
		REGA: if (c & ve & !rega) nextstate = EN;
		else if (!c & !rega) nextstate = VZ;
		else nextstate = REGA;
		
		ERRO: if (!c & !ve & !rega) nextstate = VZ;
		else if (ve & !rega) nextstate = EN;
		else nextstate = ERRO;
		
		default: nextstate = VZ;
	endcase
	assign cout = state;
	
	
	endmodule 